# Clean Agile 基本に立ち戻れ  
小さなことをする、小さなソフトウェアチームが、うまくやっていくために！
## 第1章 アジャイル入門
### アジャイルの歴史
- プレ・アジャイル：短期間のリアクティブな手順を使用  
変更コストが低く、目標がインフォーマルに規定されており、部分的に定義された問題を解決するプロジェクト向き
- 科学的管理法：分析→計画→実施  
変更コストが高く、目標が具体的で、明確に定義された問題を解決するプロジェクト向き
- 1970年 ウインストン・ロイスの論文  
論文の後半部分で論破する予定の図 → 「ウォーターフォール」
  - 1968年「構造化プログラミング」→ 「構造化分析」「構造化設計」
  - 1988年「オブジェクト指向プログラミング」→ 「オブジェクト思考分析」「オブジェクト思考設計」
  - 「分析」「設計」「実装」の虜

### スノーバード
- 2001年 17名 「軽量級プロセスのサミット」
  - プロセスやツールよりも個人との対話を
  - 包括的なドキュメントよりも動くソフトウェアを
  - 契約交渉よりも顧客との協調を
  - 計画に従うことよりも変化への対応を

### アジャイルの概要
- 鉄十字
  - プロジェクトマネージメントのトレードオフ  
  「品質」「速度」「費用」「完成」のうち好きな3つは選べる。4つ目は選べない。   
  => 十分に速く、十分に安く、必要な分だけ（アジャイル）
  - 壁のチャート  
  マネジメント支援のデータを提供する（アジャイル）
    - ベロシティ（速度）
    - バーンダウンチャート（残りのストーリー）
  - 最初に知るべきこと
    - 納期（変わらない）
    - 解決したい問題はわかっているが、システムの要求に変換できない（要求は変化する）
  - よくあるミーティング
    - ウォーターフォール：分析にかかる期間は？ → 概算はできる
  - 分析フェーズ
    - ウォーターフォール：分析は必要だが、期日になればカッコイイ図とともに終わる（終了基準がない）
  - 設計フェーズ
    - ウォーターフォール：期日通りに終わる  （終了基準がない）
    複数モジュール分解、モジュール間のインターフェイス作成、仕様変更
  - 実装フェーズ
    - ウォーターフォール：期日までに終わらない（明確な終了基準がある）
    - デスマーチのフェーズ
  - より良い方法
    - ウォーターフォール：非常にわかりやすい
    - アジャイル：イテレーション、スプリント
  - イテレーションゼロ
    - 環境設定
    - ストーリーの見積り
    - 初期設計の策定
  - アジャイルが生成するデータ
    - 実際の速度データ → 希望を破壊する
  - 鉄十字のマネジメント
    - スケジュールを延期する
      - ケースによっては可能
    - スタッフを増やす
      - ブルックスの法則：「遅れているソフトウェアプロジェクトの要員追加は、プロジェクトをさらに遅らせる」
    - 品質を下げる（ダメ）
    - スコープを変える（調整できるポイント）
  - ビジネス価値の順番
    - ステークホルダーの要求する順番で機能を実装していく

### サークルオブライフ
- [ロン・ジェフリースがXPのプラクティスを書いた図](https://ronjeffries.com/articles/017-02ff/new-framework-0/)

|名称|内容|
|---|---|
|計画ゲーム|機能、ストーリー、タスクの見積り、有線順位付け、スケジュール|
|小さなリリース|小さな単位で作業する|
|受け入れテスト|機能、ストーリー、タスクの「DONE」の定義|
|チーム全体|様々な職種が共通のゴールを目指して協力する|  

|名称|内容|
|---|---|
|持続可能なペース|ゴール前に力尽きないようにする|
|共同所有|チームに「知識の断絶」が起きないようにする|
|継続的インテグレーション|チームが現在地を把握できるように、フィードバックループを何度も閉じる|
|メタファー|チームとビジネス側がシステムについてコミュニケーションするための語彙、言語の作成、広がり|

|名称|内容|
|---|---|
|ペアリング|革新性と正確性を促進するレベルで、チームの知識の共有、レビュー、協力ができる|
|シンプルな設計|チームが無駄なことをしない|
|リファクタリング|全ての作成物の継続的な改善と改良を促進|
|テスト駆動開発|技術チームが高品質を維持しながら素早く煤ための命綱|

- アジャイルマニュフェストの目標との一致

|マニュフェスト|XP|
|---|---|
|プロセスやツールよりも個人との対話を|チーム全体、メタファー、共同所有、ペアリング、持続可能なペース|
|包括的なドキュメントよりも動くソフトウェアを|受け入れテスト、テスト駆動開発、シンプルな設計、リファクタリング、継続的インテグレーション|
|契約交渉よりも顧客との協調を|小さなリリース、計画ゲーム、受け入れテスト、メタファー|
|計画に従うことよりも変化への対応を|小さなリリース、計画ゲーム、持続可能なペース、テスト駆動開発、リファクタリング、受け入れテスト|

## 第2章 アジャイルにする理由
### プロフェッショナリズム
- 儀式より規律にコミットメント
- あらゆるところにソフトウェアが使用されている
- プログラマーが世界を支配する
- 大惨事  
不注意で大惨事を招く危険性がある

### まっとうな期待
- ゴミをリリースするわけにはいかん！
- いつでも技術的な準備を整えておく
  - イテレーションの終了時点では、常にデプロイ可能
  - あとはビジネス側の判断
- 安定した生産性  
コードをクリーンに保つ
- 安価に変更できる  
TDD、リファクタリング、シンプルな設計
- 継続的な改善  
TDD、リファクタリング、シンプルな設計
- 大胆不適に力を発揮する  
変更にたいする恐怖 → TDD
- QAは何もみつけない  
受け入れテスト、TDD、継続的インテグレーション
- テストの自働化  
受け入れテスト、TDD、継続的インテグレーション
- 互いにカバーしあう  
ペアプログラミング、チーム全体、共同所有
- 誠実な見積り  
計画ゲーム、チーム全体
- 「ノー」と言うべき  
チーム全体
- 継続的かつ積極的な学習  
チーム全体
- メンタリング  
チーム全体

### 権利章典
- 顧客の権利
  - 顧客には、計画のどの部分に関しても、いつまでに、何が、どのくらいのコストで達成できるかを知る権利がある。
  - 顧客には、全プログラミング期間を通して、最高価値を手にする権利がある。
  - 顧客には、自らが書いた再現可能なテストを通すことで、システムが機能することをちゃんと証明してもらい、現行のシステムの進捗度合を知る権利がある。
  - 顧客には、考えを途中で変えて機能を差し替えたり、プライオリティを変更したりする権利がある。その際に特別に多額の出費は必要ない。
  - 顧客には、スケジュールの変更があったら連絡を受ける権利がある。なお、その連絡は、最初に決めた期限を守るため、どうスコープを減らすかを決めるのに手遅れにならないよう、十分速やかに行われなけらばならない。そしていつでも発注を取り消し、その時点での投資に見あう、ちゃんと機能するシステムを手にする権利がある。
- 開発者の権利
  - 開発者には、何が必要とされているのかを明確なプライオリティとあわせて知る権利がある。
  - 開発者には、常に質の高い仕事をする権利がある。
  - 開発者には、同僚や上司、顧客に助力を求め、それを受ける権利がある。
  - 開発者には、自ら見積りを行い、またそれを更新する権利がある。
  - 開発者には、責任を割り当てられるのではなく、責任を自ら引き受ける権利ががる。

## 第3章 ビジネスプラクティス
### 計画ゲーム
- 高精度の見積り：コードレベルまで分轄（高精度だが高コスト）→ 見積りの意味がない
- 三点見積り：プロジェクト全体の見積り向き（内部の日程には不向き）
  - 最良ケース
  - 最有力ケース
  - 最悪ケース
- ストーリーとポイント
  - ユーザーストーリー  
  システムの機能をユーザーの視点から簡潔に記述したものである
  - 利益投資率（ROI）  
  価値-コスト
  - ストーリー：INVESTの頭文字のガイドライン  
    - Independent（独立した）
    - Negotiable（交渉可能）
    - Valueable（価値がある）
    - Estimable（見積り可能）
    - Small（小さい）
    - Testable（テスト可能）
  - ストーリーの見積り
  - デモ
  - ベロシティ  
  イテレーションの最後にベロシティとバーンダウンチャートの記入

### 小さなリリース
  - 継続的デリバリー：デリバリーだけでなく、全てのサイクルを短縮する
  - ソースコードの管理の歴史
    - パンチカード：物理的に持っている人がチェックアウト
    - テープ：チェックアウトボードのピン
    - ディスクとSCSS：悲観的ロック
    - Subversion：悲観的ロック（実際はロックされない）コンフリクト→マージ
    - Git：チェックアウト時間ゼロ、コンフリクトはいつでも解消可能

### 受け入れテスト  
全てのアジャイルプラクティスの中で理解されていない
- 仕様：「仕様とはテストである」
- プラクティス  
  - ビジネス側がユーザーストーリーの振る舞いを形式的なテストで記述 → 開発者が自働化する
  - 開発者はテスター

### チーム全体
- 当初、「オンサイト顧客」
- スクラム：顧客＝プロダクトオーナー
- チーム全体：顧客とプログラマーだけでない
- 同じ場所でやるのが最もうまくいく

## 第4章 チームプラクティス
### メタファー
- チームのコミュニケーションを効率化する語彙を提供  
顧客に不快感を与えるほど問題のあるものもある
- ドメイン駆動設計
  - ユビキタス言語

### 持続可能なペース
- スプリントではなく、マラソン
- 睡眠：パフォーマンスに重要

### 共同所有
- コードをチームで所有

### 継続的インテグレーション
- 継続的インテグレーション → 継続的ビルド 

### スタンドアップミーティング
- このミーティングは、任意である
- 毎日より頻度が低くても構わない
- 大規模なチームであっても10分以内に収める
- シンプルなやり方
1. 前回のミーティングから何をしたのか？
2. 次回のミーティングまでに何をするのか？
3. 何か邪魔になっているもはあるか？
4. 誰に感謝したいか？（任意に追加）

## 第5章 テクニカルプラクティス
### テスト駆動開発
- 会計
  - 複式簿記、賃借対照表
- TDDの３つのルール
  - 失敗するテストを書くまではプロダクションコードを書いてはいけない。（テストはコードの不足で失敗する）
  - 失敗するテストを必要以上に書いてはいけない。（コンパイルの失敗も失敗に含める）
  - プロダクションコードを必要以上に書いてはいけない。（失敗しているテストをパスさせるためだけに書く）
- デバッグ
  - デバッガーに習熟するのは望ましくない
- ドキュメンテーション
  - テストが完璧なドキュメント
  - 完全性

### リファクタリング
- レッド／グリーン／リファクター
  - 失敗するテストを作成する
  - テストをパスさせる
  - コードをクリーンにする
  - 最初のステップに戻る
- 大きなリファクタリングも小さな上記ステップで行う（数ヶ月かけても）

### シンプルな設計
- リファクタリングのゴールの1つである
  - 全てのテストをパスさせる
  - 意図を明らかにする
  - 重複を排除する
  - 要素を減らす
- 設計のウェイト
  - 設計のウェイトは、認知負荷

### ペアプログラミング
- ペアリング：2人が一緒に同じプログラミングの課題に取り組むこと
  - ドライバーとナビゲーター
  - 強制しない、時間も自由
  - シニアプログラマーとジュニアプログラマーの組み合わせが良い
  - チーム内で知識の共有が進む
  - コードレビュー
  - コストの算出は難しい
  - 多人数（モブプログラミング）

## 第6章 アジャイルになる
### アジャイルの価値基準
- ケント・ベック
  - 勇気
    - 合理的なリスクをとる
    - 品質と規律が速度を上げる
  - コミュニケーション
    - メール、チャット、メモ、対面、インフォーマルな個人間会話も重視
    - 一緒に座って頻繁にコミュニケーションするチームは奇跡を起こせる
  - フィードバック
    - アジャイル：フィードバックの頻度を量を最大化する
  - シンプリシティ
    - 直接的 間接的（受動的）にならない

### 動物のサーカス
- 完全なサークルオブライフを採用する  
しないと混乱する

### トランスフォーメーション
- アジャイルへの移行 → 価値基準の移行
  - リスクテイキング
  - 高速なフィードバック
  - 集中
  - 障壁や指揮系統を無視した広帯域のコミュニケーション

### コーチング
- コーチは必要ない。ただし、時には必要になることもあるかもしれない
- アジャイルトレーナー：振る舞い方を教える
- アジャイルコーチ：ペア、リファクタリングをやめる、継続的ビルドの失敗を無視する

### 認定資格
- 資格より本質

### 大規模アジャイル
- 小規模から中規模のソフトウェア開発チームのためのもの
- 大規模なチームは既に解決積みの問題
- ハードウェアのアジャイルはない

### アジャイルのツール

### コーチング（もうひとつの視点）
- バックログで使えるプラクティス
  - カンバン
  - スクラムとXP
  - チームのイベントをそろえる
  - エスカレーションツリー
  - チーム間の定期的なやりとり
  - ポートフォリオカンバン
  - 実用最小限のインクリメント

- 小さく集中して大きくなる
  - SOLIDの原則
  - 小さくて価値のあるユーザーストーリー
  - 小さくて頻繁なリリース
  - 継続的インテグレーション
  - シンプルな設計

## 第7章 クラフトマンシップ
### アジャイルの二日酔い
### 期待の不一致
### 開発者のアジャイル離れ
### ソフトウェアクラフトマンシップ
- 2008年11月 シカゴ
  - 動くソフトウェアだけでなく、精巧に作られたソフトウェアも
  - 変化への対応だけでなく、着実な価値の付加も
  - 個人との対話だけでなく、専門家のコミュニティも
  - 顧客との協調だけでなく、生産的なパートナーシップ

### イデオロギーとメソドロジー
### ソフトウェアクラフトマンシップにプラクティスはあるか？
### プラクティスではなく価値にフォーカスする
### プラクティスの議論
### クラフトマンシップが個人にもたらすインパクト
### クラフトマンシップが業界にもたらすインパクト
### クラフトマンシップが企業にもたらすインパクト
### クラフトマンシップとアジャイル
